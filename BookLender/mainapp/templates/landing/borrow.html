{% extends 'landing/base.html' %}
{% load static %}
{% block title %} Borrow | Bingle {% endblock %}

{% block content %}
<h1>Select Owner to Borrow From</h1>
<form method="post" id="borrow-form">
    {% csrf_token %}
    <label for="owner">Book Owner(s):</label>
    <select name="owner" id="owner">
        {% for user_book in user_books %}
        {% if user_book.owner_book_id.user != request.user %}
        <option value="{{ user_book.owner_book_id.user.username }}">{{ user_book.owner_book_id.user.username }}</option>
        {% endif %}
        {% endfor %}
    </select>
    <button type="button" id="reveal-form">Select</button>
</form>

<div id="booking-form" style="display: none;">
    <form method="post" action="{% url 'borrow' user_book.id  %}">
        {% csrf_token %}
        {% if user_book.owner_book_id.user != request.user %}
        <label for="user_book_id">User Book ID:</label>
        <input name="user_book_id" value="{{ user_book.id }}">
        <label for="owner_id">Owner ID:</label>
        <input name="owner_id" value="{{ user_book.owner_book_id.id }}">
        <label for="borrower_id">Borrower ID:</label>
        <input name="borrower_id" value="{{ request.user.id }}">

        <label for="from_date">From Date:</label>
        <input type="date" id="from_date" name="from_date" required>

        <label for="to_date">To Date:</label>
        <input type="date" id="to_date" name="to_date" required>
        {% endif %}
        <button type="submit">Submit Borrow Request</button>
    </form>
</div>
{% endblock %}